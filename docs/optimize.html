<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      性能优化的几个常用手段 | Syp's Blog
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/_assets/style.25bd4e72.css">
    <link rel="modulepreload" href="/_assets/common-bec3f312.js">
    <link rel="modulepreload" href="/_assets/docs_optimize.md.2f800130.lean.js">
    <link rel="modulepreload" href="/_assets/app.4edbcaaa.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="Syp&#39;s Blog">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-79566ff1><header class="navbar" data-v-79566ff1><!-- <div class="body-bg" style="background: url(&quot;https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175828.jpeg&quot;) center center / cover no-repeat;opacity: 0.5;position: fixed;left: 0;top: 0;z-index: -999999;height: 100vh;width: 100vw;transition: background .5s;"></div> --><!--[--><a class="title" aria-label="Syp&#39;s Blog, back to home" href="/"><img class="logo" src="/favicon.ico" alt="logo"><span>Syp&#39;s Blog</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile" data-v-79566ff1><!--[--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/" target="" rel="">🏠 首页 <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/docs.html" target="" rel="">📅 归档 <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/tags.html" target="" rel="">📂 分类 <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!--]--><!--]--><!--]--><div class="sidebar-button" data-v-79566ff1><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-79566ff1><!--[--><nav class="nav-links show-mobile" data-v-79566ff1><!--[--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/" target="" rel="">🏠 首页 <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/docs.html" target="" rel="">📅 归档 <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/tags.html" target="" rel="">📂 分类 <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!--]--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--[--><!--]--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-79566ff1></div><main data-v-79566ff1><!--[--><div class="content"><!--[--><!--[--><!--]--><!--]--><div class="md-header"><div class="md-title">性能优化的几个常用手段</div><!-- <span id="jinrishici-sentence">正在加载今日诗词....</span> --><div class="md-date">2020-07-17</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#为什么要优化？">为什么要优化？</a><!----></li><li class="catalog-item"><a class="level level-2" href="#现在开始">现在开始</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#_1-代码压缩">1.代码压缩</a></li><li class="catalog-item"><!----><a class="level level-3" href="#_2-使用cdn开始性能优化">2. 使用cdn开始性能优化</a></li><li class="catalog-item"><!----><a class="level level-3" href="#_3-修改路由引入方式">3.修改路由引入方式</a></li><!--]--></ul><div data-v-79566ff1><h2 id="为什么要优化？"><a class="header-anchor" href="#为什么要优化？" aria-hidden="true">#</a> 为什么要优化？</h2><p><strong>客户等待页面时长的流失率</strong></p><p><img src="/_assets/image-20201229141952707.ce54c38a.png" alt=""></p><p>作为一个开发者，你对首页打开速度又有多高的要求呢？</p><h2 id="现在开始"><a class="header-anchor" href="#现在开始" aria-hidden="true">#</a> 现在开始</h2><h3 id="_1-代码压缩"><a class="header-anchor" href="#_1-代码压缩" aria-hidden="true">#</a> 1.代码压缩</h3><p>首先需要下载一些依赖</p><p><strong>css 代码压缩 (optimize-css-assets-webpack-plugin)</strong></p><p>下载</p><div class="language-shell"><pre><code><span class="token function">npm</span> <span class="token function">install</span> optimize-css-assets-webpack-plugin
</code></pre></div><p>webpack.config.js 使用</p><div class="language-js"><pre><code><span class="token keyword">const</span> OptimizeCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;optimize-css-assets-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>js 代码压缩 (uglifyjs-webpack-plugin)</strong></p><p>下载</p><div class="language-shell"><pre><code><span class="token function">npm</span> <span class="token function">install</span> optimize-css-assets-webpack-plugin
</code></pre></div><p>webpack.config.js 使用</p><div class="language-js"><pre><code><span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;uglifyjs-webpack-plugin&#39;</span><span class="token punctuation">)</span>
plugins<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">// 开启缓存</span>
      parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启多线程编译</span>
      sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 是否sourceMap</span>
      uglifyOptions<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 丑化参数</span>
        comments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        warnings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        compress<span class="token operator">:</span> <span class="token punctuation">{</span>
          unused<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          dead_code<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          collapse_vars<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          reduce_vars<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        output<span class="token operator">:</span> <span class="token punctuation">{</span>
          comments<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>开启gzip</strong></p><p>安装</p><div class="language-shell"><pre><code><span class="token function">npm</span> <span class="token function">install</span> compression-webpack-plugin
</code></pre></div><p>webpack.config.js 使用</p><div class="language-js"><pre><code><span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span>
plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      asset<span class="token operator">:</span> <span class="token string">&#39;[path].gz[query]&#39;</span><span class="token punctuation">,</span>
      algorithm<span class="token operator">:</span> <span class="token string">&#39;gzip&#39;</span><span class="token punctuation">,</span>
      test<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>
        <span class="token string">&#39;\\.(&#39;</span> <span class="token operator">+</span>
        <span class="token punctuation">[</span><span class="token string">&#39;js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
        <span class="token string">&#39;)$&#39;</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token operator">:</span> <span class="token number">0.8</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p>nginx 配置</p><div class="language-nginx"><pre><code><span class="token keyword">gzip</span> on<span class="token punctuation">;</span>
<span class="token keyword">gzip_static</span> on<span class="token punctuation">;</span>
<span class="token keyword">gzip_min_length</span> <span class="token number">1</span>k<span class="token punctuation">;</span>
<span class="token keyword">gzip_buffers</span> <span class="token number">4</span> <span class="token number">32</span>k<span class="token punctuation">;</span>
<span class="token keyword">gzip_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
<span class="token keyword">gzip_comp_level</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">gzip_types</span> text<span class="token operator">/</span>plain application<span class="token operator">/</span>x<span class="token operator">-</span>javascript text<span class="token operator">/</span>css application<span class="token operator">/</span>xml<span class="token punctuation">;</span>
<span class="token keyword">gzip_vary</span> on<span class="token punctuation">;</span>
<span class="token keyword">gzip_disable</span> <span class="token string">&quot;MSIE [1-6].&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-使用cdn开始性能优化"><a class="header-anchor" href="#_2-使用cdn开始性能优化" aria-hidden="true">#</a> 2. 使用cdn开始性能优化</h3><ol><li><p>index.html中引入js</p></li><li><p>webpack externals中进行配置</p></li></ol><div class="language-js"><pre><code>externals<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string">&#39;vue&#39;</span><span class="token operator">:</span><span class="token string">&#39;Vue&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;mint-ui&#39;</span><span class="token operator">:</span><span class="token string">&#39;MINT&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;axios&#39;</span><span class="token operator">:</span><span class="token string">&#39;axios&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;vue-router&#39;</span><span class="token operator">:</span><span class="token string">&#39;VueRouter&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;vue-i18n&#39;</span><span class="token operator">:</span><span class="token string">&#39;VueI18n&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3-修改路由引入方式"><a class="header-anchor" href="#_3-修改路由引入方式" aria-hidden="true">#</a> 3.修改路由引入方式</h3><p>路由懒加载</p></div><div class="links-wrapper" data-v-79566ff1><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div data-v-79566ff1><!-- <footer class="page-edit">
      <a v-for="(item,index) in data.platform" :key="index" :href="item.href"><img class="imgIcon" :src="item.icon" ></a>
      </footer>
     <p class="platform">以上皆为 <a href="javascript:;">悲伤日记</a> 文章发布平台</p> --><p class="platform"> Copyright © 2020-2021 <a href="https://github.com/CrazyMrYan">@Syp</a></p></div><!--[--><!--[--><!--]--><!--]--></div><!-- 只想点击背景才关闭 请使用 .self 修饰符 --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-79566ff1><ul data-v-79566ff1><li class="active" data-v-79566ff1> ☀️ </li><li class="" data-v-79566ff1> 🌑 </li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"8f402100\",\"README.md\":\"fe610456\",\"docs_deep-going-react-01.md\":\"43ae0b64\",\"docs_deepCopy.md\":\"c8379117\",\"docs_how-to-write-a-patent.md\":\"d715321b\",\"docs_optimize.md\":\"2f800130\",\"docs_redux&react-redux.md\":\"e2425f3e\",\"docs_redux-middleware.md\":\"13ec1bf0\",\"docs_string-to-number.md\":\"f6280858\",\"docs_tools.md\":\"b161773b\",\"docs_website-Monitoring.md\":\"1b54fe4d\",\"docs_website-Monitoring2.md\":\"5890a03b\",\"docs_why-keep-blogging.md\":\"f3c79b0a\",\"docs_wx-miniprograme-part1.md\":\"dbad4f32\",\"more_docs.md\":\"5526df53\",\"more_Friendship.md\":\"746f349d\",\"more_index.md\":\"6f6f6489\",\"more_subscribe.md\":\"c9d6d924\",\"more_tags.md\":\"91f60878\",\"more_update-log.md\":\"3bcf9854\"}")</script>
    <script type="module" async src="/_assets/app.4edbcaaa.js"></script>
  </body>
</html>
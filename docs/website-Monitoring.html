<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      ç½‘ç«™ç›‘æ§ç¬”è®°ï¼ˆä¸€ï¼‰ â€” Performance | Syp's Blog
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/_assets/style.25bd4e72.css">
    <link rel="modulepreload" href="/_assets/common-bec3f312.js">
    <link rel="modulepreload" href="/_assets/docs_website-Monitoring.md.1b54fe4d.lean.js">
    <link rel="modulepreload" href="/_assets/app.2ecb7f3f.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="Syp&#39;s Blog">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-79566ff1><header class="navbar" data-v-79566ff1><!-- <div class="body-bg" style="background: url(&quot;https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175828.jpeg&quot;) center center / cover no-repeat;opacity: 0.5;position: fixed;left: 0;top: 0;z-index: -999999;height: 100vh;width: 100vw;transition: background .5s;"></div> --><!--[--><a class="title" aria-label="Syp&#39;s Blog, back to home" href="/"><img class="logo" src="/favicon.ico" alt="logo"><span>Syp&#39;s Blog</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile" data-v-79566ff1><!--[--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!--]--><!--]--><!--]--><div class="sidebar-button" data-v-79566ff1><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-79566ff1><!--[--><nav class="nav-links show-mobile" data-v-79566ff1><!--[--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item" data-v-79566ff1><a class="nav-link" href="/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--[--><!--]--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--[--><!--]--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-79566ff1></div><main data-v-79566ff1><!--[--><div class="content"><!--[--><!--[--><!--]--><!--]--><div class="md-header"><div class="md-title">ç½‘ç«™ç›‘æ§ç¬”è®°ï¼ˆä¸€ï¼‰ â€” Performance</div><!-- <span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span> --><div class="md-date">2021-01-29</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#what-is-website-monitoring">What is website monitoring?</a><!----></li><li class="catalog-item"><a class="level level-2" href="#ä¸»è¦ä½œç”¨">ä¸»è¦ä½œç”¨</a><!----></li><li class="catalog-item"><a class="level level-2" href="#å¦‚ä½•åšï¼Ÿ">å¦‚ä½•åšï¼Ÿ</a><!----></li><li class="catalog-item"><a class="level level-2" href="#goï¼">Goï¼</a><!----></li><li class="catalog-item"><a class="level level-2" href="#ç½‘ç«™æ€§èƒ½ç›‘å¬">ç½‘ç«™æ€§èƒ½ç›‘å¬</a><!----></li><li class="catalog-item"><a class="level level-2" href="#ä»€ä¹ˆæ˜¯-performance-ï¼Ÿ">ä»€ä¹ˆæ˜¯ performance ï¼Ÿ</a><!----></li><li class="catalog-item"><a class="level level-2" href="#performance-å±æ€§">performance å±æ€§</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-timing">performance.timing</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-navigation">performance.navigation</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-resourcetimingbufferfull">performance.resourcetimingbufferfull</a></li><li class="catalog-item"><a class="level level-2" href="#performance-æ–¹æ³•">performance æ–¹æ³•</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-now">performance.now()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-getentries">performance.getEntries()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-mark">performance.mark()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-measure">performance.measure()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#performance-clearmarks">performance.clearMarks()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å°demo">å°demo</a></li><li class="catalog-item"><a class="level level-2" href="#æ€»ç»“">æ€»ç»“</a><!----></li><li class="catalog-item"><a class="level level-2" href="#å®æˆ˜ä¸€æ³¢">å®æˆ˜ä¸€æ³¢</a><!----></li><li class="catalog-item"><a class="level level-2" href="#æ³¨è§£åœ°å€">æ³¨è§£åœ°å€</a><!----></li><!--]--></ul><div data-v-79566ff1><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="100" src="//music.163.com/outchain/player?type=2&amp;id=28613314&amp;auto=0&amp;height=66"></iframe><h2 id="what-is-website-monitoring"><a class="header-anchor" href="#what-is-website-monitoring" aria-hidden="true">#</a> What is website monitoring?</h2><p>ä»€ä¹ˆæ˜¯<code>ç½‘ç«™ç›‘æ§</code>ï¼Ÿå…¶å®æˆ‘ä»¬ä¸»è¦æ˜¯å®æ—¶ç›‘æ§<code>ç½‘ç«™æ€§èƒ½</code>ï¼Œæ˜¯å¦å­˜åœ¨<code>å¼‚å¸¸èµ„æº</code>ã€<code>è¯·æ±‚</code>ã€<code>ä»£ç å‡ºé”™</code> ã€<code>é¡µé¢åŠ è½½æ¶ˆè€—æ—¶é•¿</code> ç­‰ ä¸€ç³»åˆ—é—®é¢˜ï¼å¦‚æœå‡ºç°è¿™äº›é—®é¢˜ï¼Œä½ èƒ½ä¸èƒ½åŠæ—¶å®šä½é—®é¢˜åŸå› ? åœ¨ä¹‹å‰çš„ <a href="http://blog.lovemysoul.vip/docs/vue-Optimize.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BC%98%E5%8C%96%EF%BC%9F" target="_blank" rel="noopener noreferrer">ã€Šå¦‚ä½•ä¼˜åŒ–ç¥–ä¼ ä»£ç ã€‹</a> è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä¹Ÿæœ‰è®²åˆ°<code>å®¢æˆ·æµå¤±ç‡</code>ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ã€‚åªä¸è¿‡æ˜¯é’ˆå¯¹äºç½‘é¡µæ‰“å¼€é€Ÿåº¦çš„ï¼Œé‚£å¦‚æœä½ é¡µé¢è¯·æ±‚èµ„æºéƒ½é”™è¯¯äº†å¦‚ <code>js</code>ã€ <code>css</code>ã€<code>request</code> å‘ç”Ÿé”™è¯¯äº†å‘¢ï¼Ÿä¸èƒ½åŠæ—¶å®šä½é—®é¢˜ï¼Œé‚£å²‚ä¸æ˜¯GGäº†ã€‚</p><h2 id="ä¸»è¦ä½œç”¨"><a class="header-anchor" href="#ä¸»è¦ä½œç”¨" aria-hidden="true">#</a> ä¸»è¦ä½œç”¨</h2><ul><li>æµ‹DNSæ±¡æŸ“æ£€æµ‹</li><li>ç½‘ç«™æ‰“å¼€é€Ÿåº¦æ£€æµ‹</li><li>ç½‘ç«™èµ„æºå‡ºç°å¼‚å¸¸</li><li>æ„ŸçŸ¥åˆ°ä¸šåŠ¡å‡ºé”™çš„æ¦‚ç‡</li><li>å‘å¸ƒåå¯¹æ€§èƒ½æœ‰å¦å­˜åœ¨å½±å“</li><li>äº†è§£ä¸šåŠ¡çš„ç¨³å®šæ€§</li><li>å¯¹è®¿é—®ç”¨æˆ·è¿›è¡Œåˆ†æ</li></ul><h2 id="å¦‚ä½•åšï¼Ÿ"><a class="header-anchor" href="#å¦‚ä½•åšï¼Ÿ" aria-hidden="true">#</a> å¦‚ä½•åšï¼Ÿ</h2><ol><li>æ€§èƒ½ç›‘æ§</li><li>èµ„æºå¼‚å¸¸</li><li>è¾…åŠ©æ’ä»¶</li><li>è®°å½•æ—¥å¿—</li><li>ç›‘æ§å¹³å°</li><li>æ•æ‰å¼‚å¸¸</li><li>èµ„æºé˜»å¡</li></ol><p>ä»Šå¤©æˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹ ç¬¬ä¸€ä¸ªæ€§èƒ½ç›‘æ§ï¼ˆä¸»è¦æ˜¯å›´ç»• js ä¸­ performance apiè®²è§£ï¼‰,å› ä¸ºå…³ä¹æ€§èƒ½æ–¹é¢ä¸œè¥¿ç¡®å®å¤ªå¤šäº†</p><h2 id="goï¼"><a class="header-anchor" href="#goï¼" aria-hidden="true">#</a> Goï¼</h2><p><img src="http://img.lovemysoul.vip/images/74d687c76ce9be01bad92404fa2b5f8.png" alt=""></p><h2 id="ç½‘ç«™æ€§èƒ½ç›‘å¬"><a class="header-anchor" href="#ç½‘ç«™æ€§èƒ½ç›‘å¬" aria-hidden="true">#</a> ç½‘ç«™æ€§èƒ½ç›‘å¬</h2><h2 id="ä»€ä¹ˆæ˜¯-performance-ï¼Ÿ"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-performance-ï¼Ÿ" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ performance ï¼Ÿ</h2><p>æˆ‘ä»¬å¯ä»¥å…ˆäº†è§£ä¸€ä¸‹ <a href="https://developer.mozilla.org/zh-cn/docs/web/api/performance" target="_blank" rel="noopener noreferrer">Performance [0]</a>ï¼Œåšç½‘ç«™ç›‘æ§å¿…å¤‡ä¹‹ä¸€</p><p>MDN è¿™æ ·æè¿° Performance :</p><blockquote><p><code>Performance</code> æ¥å£å¯ä»¥è·å–åˆ°å½“å‰é¡µé¢ä¸­ä¸æ€§èƒ½ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒæ˜¯ High Resolution Time API çš„ä¸€éƒ¨åˆ†ï¼ŒåŒæ—¶ä¹Ÿèåˆäº† Performance Timeline APIã€<a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API" target="_blank" rel="noopener noreferrer">Navigation Timing API</a>ã€ <a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API" target="_blank" rel="noopener noreferrer">User Timing API</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API" target="_blank" rel="noopener noreferrer">Resource Timing API</a>ã€‚</p></blockquote><h2 id="performance-å±æ€§"><a class="header-anchor" href="#performance-å±æ€§" aria-hidden="true">#</a> performance å±æ€§</h2><p>å…ˆçœ‹çœ‹æ˜¯ä¸ªå•¥ä¸œè¥¿</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>performance<span class="token punctuation">)</span>
</code></pre></div><p><img src="http://img.lovemysoul.vip/images/image-20210129154803890.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºäº† <code>Performance </code> å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å‡ ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯</p><ol><li><s>memory</s> é¢„æœŸè·¨æµè§ˆå™¨æ”¯æŒä¸ä½³ã€‚</li></ol><p><img src="http://img.lovemysoul.vip/images/image-20210129164039689.png" alt=""></p><div class="language-js"><pre><code><span class="token comment">// ä¸Šä¸‹æ–‡å†…å¯ç”¨å †çš„æœ€å¤§ä½“ç§¯ï¼Œä»¥å­—èŠ‚è®¡ç®—ã€‚</span>
jsHeapSizeLimit
<span class="token comment">// å·²åˆ†é…çš„å †ä½“ç§¯ï¼Œä»¥å­—èŠ‚è®¡ç®—ã€‚</span>
totalJSHeapSize
<span class="token comment">// å½“å‰ JS å †æ´»è·ƒæ®µï¼ˆsegmentï¼‰çš„ä½“ç§¯ï¼Œä»¥å­—èŠ‚è®¡ç®—ã€‚</span>
usedJSHeapSize

</code></pre></div><ol start="2"><li><s>eventCounts</s> é¢„æœŸè·¨æµè§ˆå™¨æ”¯æŒä¸ä½³ã€‚</li></ol><hr><ol start="3"><li><p>timing</p></li><li><p>navigation</p></li><li><p>timeOrigin</p></li><li><p>onresourcetimingbufferfull</p></li></ol><p>å› ä¸º <code>memory</code> ã€<code>ä¸eventCounts</code> çš„æ”¯æŒæ€§ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆç•¥è¿‡ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å» MDN ç§ç§</p><p><strong>é‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°†è¿™å››ä¸ª</strong></p><ul><li><p>timing</p></li><li><p>navigation</p></li><li><p>timeOrigin</p></li><li><p>onresourcetimingbufferfull</p></li></ul><h3 id="performance-timing"><a class="header-anchor" href="#performance-timing" aria-hidden="true">#</a> performance.timing</h3><p>timing æ˜¯ä¸ªå•¥ç©æ„ï¼Ÿ</p><p>æ¥ç€æ‰“å°ä¸€ä¸‹çœ‹çœ‹</p><p><img src="http://img.lovemysoul.vip/images/image-20210129160224186.png" alt=""></p><p>å¤§å®¶ä¹Ÿå¯ä»¥é…åˆè¿™å¼ å›¾æ¥çœ‹çœ‹ <img src="http://img.lovemysoul.vip/images/16112863371891.jpg" alt=""></p><p>performance .timing å¯¹è±¡åŒ…å«å»¶è¿Ÿç›¸å…³çš„æ€§èƒ½ä¿¡æ¯ã€‚</p><p>å› ä¸ºä¸œè¥¿å¤ªå¤šï¼Œæˆ‘ä»¬åˆ†ç¦»ä¸€äº›é‡è¦çš„ä¿¡æ¯å‡ºæ¥è®²è§£</p><div class="language-js"><pre><code><span class="token keyword">let</span> t <span class="token operator">=</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">;</span>
é¡µé¢åŠ è½½å®Œæˆæ‰€è€—æ—¶é—´ <span class="token operator">=</span> t<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>
è§£æ <span class="token constant">DOM</span>æ ‘ æ—¶é—´ <span class="token operator">=</span> t<span class="token punctuation">.</span>domComplete <span class="token operator">-</span> t<span class="token punctuation">.</span>responseEnd<span class="token punctuation">;</span>
èµ„æºåŠ è½½å®Œæˆæ—¶é—´ <span class="token operator">=</span> t<span class="token punctuation">.</span>responseEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>requestStart
<span class="token constant">TCP</span>å»ºç«‹è¿æ¥å®Œæˆæ—¶é—´ <span class="token operator">=</span> t<span class="token punctuation">.</span>connectEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>connectStart
</code></pre></div><p><strong>ä½œç”¨ï¼š å¯ä»¥ç›‘å¬è¿™äº›æ•°å€¼ï¼Œåˆ¤æ–­ç½‘é¡µåŠ è½½æ€§èƒ½</strong></p><p>è™½ç„¶ç°åœ¨å¥½åƒè¦åºŸå¼ƒäº†ï¼Œä½†æ˜¯ç°åœ¨è¿˜æ˜¯å¯ä»¥ç”¨çš„</p><h3 id="performance-navigation"><a class="header-anchor" href="#performance-navigation" aria-hidden="true">#</a> performance.navigation</h3><p>è¿˜æ˜¯æ¥æ‰“å°ä¸€ä¸‹</p><p><img src="http://img.lovemysoul.vip/images/image-20210129163241241.png" alt=""></p><p>ç¬¬ä¸€ä¸ªæ˜¯ <code>redirectCount</code> æ˜¯é‡å®šå‘æ¬¡æ•°</p><p>ç¬¬äºŒä¸ªæ˜¯ <code>type </code> åˆ¤æ–­æ˜¯é¡µé¢æ˜¯ä»å“ªé‡ŒåŠ è½½çš„</p><div class="language-js"><pre><code>type
<span class="token comment">//0ï¼šç½‘é¡µé€šè¿‡ç‚¹å‡»é“¾æ¥ã€åœ°å€æ è¾“å…¥ã€è¡¨å•æäº¤ã€è„šæœ¬æ“ä½œç­‰æ–¹å¼åŠ è½½</span>
<span class="token comment">//1ï¼šç½‘é¡µé€šè¿‡â€œé‡æ–°åŠ è½½â€æŒ‰é’®æˆ–è€…location.reload()æ–¹æ³•åŠ è½½</span>
<span class="token comment">//2ï¼šç½‘é¡µé€šè¿‡â€œå‰è¿›â€æˆ–â€œåé€€â€æŒ‰é’®åŠ è½½</span>
<span class="token comment">//255ï¼šå…¶ä»–æ¥æºçš„åŠ è½½</span>
</code></pre></div><p><strong>ä½œç”¨ï¼šå¯ä»¥ç”¨ä½œç»Ÿè®¡ç½‘é¡µè®¿é—®æ–¹å¼åŠæ¥æºï¼Œä»¥åŠæ˜¯å¦é‡å®šå‘</strong></p><h3 id="performance-resourcetimingbufferfull"><a class="header-anchor" href="#performance-resourcetimingbufferfull" aria-hidden="true">#</a> performance.resourcetimingbufferfull</h3><p>å±æ€§æ˜¯ä¸€ä¸ªåœ¨resourcetimingbufferfulläº‹ä»¶è§¦å‘æ—¶ä¼šè¢«è°ƒç”¨çš„ event handler ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªæ‰‹åŠ¨è®¾ç½®çš„å›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨çš„èµ„æºæ—¶é—´æ€§èƒ½ç¼“å†²åŒºæ»¡æ—¶æ‰§è¡Œã€‚</p><p><strong>å®˜æ–¹ä¾‹å­</strong>ï¼š</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">buffer_full</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;WARNING: Resource Timing Buffer is FULL!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  performance<span class="token punctuation">.</span><span class="token function">setResourceTimingBufferSize</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Set a callback if the resource buffer becomes filled</span>
  performance<span class="token punctuation">.</span>onresourcetimingbufferfull <span class="token operator">=</span> buffer_full<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>body onload<span class="token operator">=</span><span class="token string">&quot;init()&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="performance-æ–¹æ³•"><a class="header-anchor" href="#performance-æ–¹æ³•" aria-hidden="true">#</a> performance æ–¹æ³•</h2><p>æ–¹æ³•è¿˜æ˜¯å¾ˆå¤šçš„</p><p><img src="http://img.lovemysoul.vip/images/image-20210129165609974.png" alt=""></p><p>é‡ç‚¹å…³æ³¨å‡ ä¸ªï¼š</p><h3 id="performance-now"><a class="header-anchor" href="#performance-now" aria-hidden="true">#</a> performance.now()</h3><p>è¿”å›å½“å‰åˆ°é¡µé¢æ‰“å¼€æ—¶åˆ»çš„è€—æ—¶ï¼Œç²¾ç¡®åˆ°åƒåˆ†ä¹‹ä¸€æ¯«ç§’</p><div class="language-js"><pre><code>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="http://img.lovemysoul.vip/images/image-20210129153807815.png" alt=""></p><p><strong>ä½œç”¨ï¼šç›‘æ§é¡µé¢èµ„æºè¯·æ±‚è€—æ—¶</strong></p><h3 id="performance-getentries"><a class="header-anchor" href="#performance-getentries" aria-hidden="true">#</a> performance.getEntries()</h3><p>å¯¹ç½‘é¡µå‘èµ·çš„æ‰€æœ‰HTTPè¯·æ±‚è€—æ—¶ä¿¡æ¯ç»Ÿè®¡åï¼Œä»¥æ•°ç»„æ–¹å¼è¿”å›</p><div class="language-js"><pre><code>performance<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="http://img.lovemysoul.vip/images/image-20210129173711265.png" alt=""></p><p><strong>ä½œç”¨ï¼šç›‘æ§è¯·æ±‚èµ„æºè¯·æ±‚è€—æ—¶</strong></p><h3 id="performance-mark"><a class="header-anchor" href="#performance-mark" aria-hidden="true">#</a> performance.mark()</h3><p>å»ºç«‹æµ‹é€Ÿæ ‡è®°</p><div class="language-js"><pre><code>performance<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token string">&quot;mySetTimeout-start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="performance-measure"><a class="header-anchor" href="#performance-measure" aria-hidden="true">#</a> performance.measure()</h3><p>ç”¨äºè®¡ç®—æ ‡è®°ä¹‹é—´çš„æ—¶é—´æˆ³</p><div class="language-js"><pre><code>performance<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span>
	<span class="token string">&quot;mySetTimeout&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mySetTimeout-start&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mySetTimeout-end&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="performance-clearmarks"><a class="header-anchor" href="#performance-clearmarks" aria-hidden="true">#</a> performance.clearMarks()</h3><p>æ¸…é™¤æµ‹é€Ÿæ ‡è®°</p><div class="language-js"><pre><code>performance<span class="token punctuation">.</span><span class="token function">clearMarks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å°demo"><a class="header-anchor" href="#å°demo" aria-hidden="true">#</a> å°demo</h3><p>å¼•ç”¨å®˜ç½‘ä¾‹å­</p><div class="language-js"><pre><code><span class="token comment">// ä»¥ä¸€ä¸ªæ ‡è®°å¼€å§‹ã€‚</span>
performance<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token string">&quot;mySetTimeout-start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç­‰å¾…ä¸€äº›æ—¶é—´ã€‚</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ ‡è®°æ—¶é—´çš„ç»“æŸã€‚</span>
  performance<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token string">&quot;mySetTimeout-end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// æµ‹é‡ä¸¤ä¸ªä¸åŒçš„æ ‡è®°ã€‚</span>
  performance<span class="token punctuation">.</span><span class="token function">measure</span><span class="token punctuation">(</span>
    <span class="token string">&quot;mySetTimeout&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mySetTimeout-start&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mySetTimeout-end&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è·å–æ‰€æœ‰çš„æµ‹é‡è¾“å‡ºã€‚</span>
  <span class="token comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­åªæœ‰ä¸€ä¸ªã€‚</span>
  <span class="token keyword">var</span> measures <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">getEntriesByName</span><span class="token punctuation">(</span><span class="token string">&quot;mySetTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> measure <span class="token operator">=</span> measures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout milliseconds:&quot;</span><span class="token punctuation">,</span> measure<span class="token punctuation">.</span>duration<span class="token punctuation">)</span>

  <span class="token comment">// æ¸…é™¤å­˜å‚¨çš„æ ‡è®°</span>
  performance<span class="token punctuation">.</span><span class="token function">clearMarks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  performance<span class="token punctuation">.</span><span class="token function">clearMeasures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¾“å‡º <img src="http://img.lovemysoul.vip/images/1612061312(1).jpg" alt=""></p><p><strong>ä½œç”¨ï¼šå¯ä»¥è®¡ç®—æŸæ®µä»£ç æ‰§è¡Œé€Ÿåº¦</strong></p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æˆ‘ä»¬åœ¨ä»¥ä¸Šçš„å¯¹ <code>performance</code> çš„ç®€å•äº†è§£ä¹‹åæˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±éœ€è¦ç›‘æ§çš„æ•°æ®ï¼Œå¦‚xxxèµ„æºåŠ è½½å¤ªæ…¢æˆ–æ˜¯é¡µé¢åŠ è½½é€Ÿåº¦è¿›è¡Œä¸ŠæŠ¥ï¼Œå¹¶è®°å½• log ä¸ŠæŠ¥ï¼Œè¿›è¡Œè¿›è¡Œæ—¥æ•°æ®å½’æ¡£ã€‚ä¸‹ä¸€ç¯‡å°†ä¼šè®²ï¼Œå¦‚ä½•ç›‘å¬ç½‘ç«™èµ„æºå¼‚å¸¸ã€‚</p><h2 id="å®æˆ˜ä¸€æ³¢"><a class="header-anchor" href="#å®æˆ˜ä¸€æ³¢" aria-hidden="true">#</a> å®æˆ˜ä¸€æ³¢</h2><p>æˆ‘ä»¬å°†å‰é¢è®²åˆ°çš„æ‰€éœ€çš„å¯ä»¥å†™æˆä¸€ä¸ªç›‘æ§å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæ‰§è¡Œä¸ŠæŠ¥[1]</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">getPerformanceTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> performance <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">;</span>
    <span class="token keyword">var</span> t <span class="token operator">=</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">;</span>
    <span class="token keyword">var</span> gather <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘é¡µé¢åŠ è½½å®Œæˆçš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘è¿™å‡ ä¹ä»£è¡¨äº†ç”¨æˆ·ç­‰å¾…é¡µé¢å¯ç”¨çš„æ—¶é—´</span>
    gather<span class="token punctuation">.</span>loadPage <span class="token operator">=</span> t<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘è§£æ DOM æ ‘ç»“æ„çš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘åçœä¸‹ä½ çš„ DOM æ ‘åµŒå¥—æ˜¯ä¸æ˜¯å¤ªå¤šäº†ï¼</span>
    gather<span class="token punctuation">.</span>domReady <span class="token operator">=</span> t<span class="token punctuation">.</span>domComplete <span class="token operator">-</span> t<span class="token punctuation">.</span>responseEnd<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘é‡å®šå‘çš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘æ‹’ç»é‡å®šå‘ï¼æ¯”å¦‚ï¼Œhttp://example.com/ å°±ä¸è¯¥å†™æˆ http://example.com</span>
    gather<span class="token punctuation">.</span>redirect <span class="token operator">=</span> t<span class="token punctuation">.</span>redirectEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>redirectStart<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘DNS æŸ¥è¯¢æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘DNS é¢„åŠ è½½åšäº†ä¹ˆï¼Ÿé¡µé¢å†…æ˜¯ä¸æ˜¯ä½¿ç”¨äº†å¤ªå¤šä¸åŒçš„åŸŸåå¯¼è‡´åŸŸåæŸ¥è¯¢çš„æ—¶é—´å¤ªé•¿ï¼Ÿ</span>
    <span class="token comment">// å¯ä½¿ç”¨ HTML5 Prefetch é¢„æŸ¥è¯¢ DNS ï¼Œè§ï¼š[HTML5 prefetch](http://segmentfault.com/a/1190000000633364)            </span>
    gather<span class="token punctuation">.</span>lookupDomain <span class="token operator">=</span> t<span class="token punctuation">.</span>domainLookupEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>domainLookupStart<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘è¯»å–é¡µé¢ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘è¿™å¯ä»¥ç†è§£ä¸ºç”¨æˆ·æ‹¿åˆ°ä½ çš„èµ„æºå ç”¨çš„æ—¶é—´ï¼ŒåŠ å¼‚åœ°æœºæˆ¿äº†ä¹ˆï¼ŒåŠ CDN å¤„ç†äº†ä¹ˆï¼ŸåŠ å¸¦å®½äº†ä¹ˆï¼ŸåŠ  CPU è¿ç®—é€Ÿåº¦äº†ä¹ˆï¼Ÿ</span>
    <span class="token comment">// TTFB å³ Time To First Byte çš„æ„æ€</span>
    <span class="token comment">// ç»´åŸºç™¾ç§‘ï¼šhttps://en.wikipedia.org/wiki/Time_To_First_Byte</span>
    gather<span class="token punctuation">.</span>ttfb <span class="token operator">=</span> t<span class="token punctuation">.</span>responseStart <span class="token operator">-</span> t<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘å†…å®¹åŠ è½½å®Œæˆçš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘é¡µé¢å†…å®¹ç»è¿‡ gzip å‹ç¼©äº†ä¹ˆï¼Œé™æ€èµ„æº css/js ç­‰å‹ç¼©äº†ä¹ˆï¼Ÿ</span>
    gather<span class="token punctuation">.</span>request <span class="token operator">=</span> t<span class="token punctuation">.</span>responseEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>requestStart<span class="token punctuation">;</span>
    <span class="token comment">//ã€é‡è¦ã€‘æ‰§è¡Œ onload å›è°ƒå‡½æ•°çš„æ—¶é—´</span>
    <span class="token comment">//ã€åŸå› ã€‘æ˜¯å¦å¤ªå¤šä¸å¿…è¦çš„æ“ä½œéƒ½æ”¾åˆ° onload å›è°ƒå‡½æ•°é‡Œæ‰§è¡Œäº†ï¼Œè€ƒè™‘è¿‡å»¶è¿ŸåŠ è½½ã€æŒ‰éœ€åŠ è½½çš„ç­–ç•¥ä¹ˆï¼Ÿ</span>
    gather<span class="token punctuation">.</span>loadEvent <span class="token operator">=</span> t<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>loadEventStart<span class="token punctuation">;</span>
    <span class="token comment">// DNS ç¼“å­˜æ—¶é—´</span>
    gather<span class="token punctuation">.</span>appcache <span class="token operator">=</span> t<span class="token punctuation">.</span>domainLookupStart <span class="token operator">-</span> t<span class="token punctuation">.</span>fetchStart<span class="token punctuation">;</span>
    <span class="token comment">// å¸è½½é¡µé¢çš„æ—¶é—´</span>
    gather<span class="token punctuation">.</span>unloadEvent <span class="token operator">=</span> t<span class="token punctuation">.</span>unloadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>unloadEventStart<span class="token punctuation">;</span>
    <span class="token comment">// TCP å»ºç«‹è¿æ¥å®Œæˆæ¡æ‰‹çš„æ—¶é—´</span>
    gather<span class="token punctuation">.</span>connect <span class="token operator">=</span> t<span class="token punctuation">.</span>connectEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>connectStart<span class="token punctuation">;</span>
    <span class="token comment">// è¯·æ±‚èµ„æºé›†åˆ</span>
    gather<span class="token punctuation">.</span>requestResources <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> gather<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="http://img.lovemysoul.vip/images/1612062279(1).jpg" alt=""></p><h2 id="æ³¨è§£åœ°å€"><a class="header-anchor" href="#æ³¨è§£åœ°å€" aria-hidden="true">#</a> æ³¨è§£åœ°å€</h2><p>[0] <a href="https://developer.mozilla.org/zh-cn/docs/web/api/performance" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-cn/docs/web/api/performance</a></p><p>[1] <a href="https://blog.csdn.net/p312011150/article/details/93748456" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/p312011150/article/details/93748456</a></p></div><div class="links-wrapper" data-v-79566ff1><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div data-v-79566ff1><!-- <footer class="page-edit">
      <a v-for="(item,index) in data.platform" :key="index" :href="item.href"><img class="imgIcon" :src="item.icon" ></a>
      </footer>
     <p class="platform">ä»¥ä¸Šçš†ä¸º <a href="javascript:;">æ‚²ä¼¤æ—¥è®°</a> æ–‡ç« å‘å¸ƒå¹³å°</p> --><p class="platform"> Copyright Â© 2020-2021 <a href="https://github.com/CrazyMrYan">@Syp</a></p></div><!--[--><!--[--><!--]--><!--]--></div><!-- åªæƒ³ç‚¹å‡»èƒŒæ™¯æ‰å…³é—­ è¯·ä½¿ç”¨ .self ä¿®é¥°ç¬¦ --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-79566ff1><ul data-v-79566ff1><li class="active" data-v-79566ff1> â˜€ï¸ </li><li class="" data-v-79566ff1> ğŸŒ‘ </li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"8f402100\",\"README.md\":\"fe610456\",\"docs_deep-going-react-01.md\":\"43ae0b64\",\"docs_deepCopy.md\":\"c8379117\",\"docs_optimize.md\":\"2f800130\",\"docs_redux&react-redux.md\":\"347bcad1\",\"docs_string-to-number.md\":\"f6280858\",\"docs_tools.md\":\"b161773b\",\"docs_website-Monitoring.md\":\"1b54fe4d\",\"docs_website-Monitoring2.md\":\"5890a03b\",\"docs_why-keep-blogging.md\":\"f3c79b0a\",\"more_docs.md\":\"5526df53\",\"more_Friendship.md\":\"746f349d\",\"more_index.md\":\"6f6f6489\",\"more_subscribe.md\":\"c9d6d924\",\"more_tags.md\":\"91f60878\",\"more_update-log.md\":\"3bcf9854\"}")</script>
    <script type="module" async src="/_assets/app.2ecb7f3f.js"></script>
  </body>
</html>